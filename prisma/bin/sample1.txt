
model User {
  id Int @id @default(autoincrement())
  username String?
  email String @unique 
  password String
  role Role @default(USER)
}

enum Role {
  ADMIN
  EMPLOYER
  USER
}

model Product {
  id            Int         @id @default(autoincrement())
  name          String
  sku           String      @unique
  description   String?     @db.Text
  price         Float
  stock         Int
  status        Status      @default(active)
  // status        String      @default("active") // e.g., active, inactive, discontinued
  categoryId    Int?
  category      Category?   @relation(fields: [categoryId], references: [id])
  tags          Tag[]       @relation("ProductTags")
  variants      Variant[]
  images        Image[]
  stockHistory  StockHistory[]
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt
}

enum Status {
  active
  inactive
}

model Category {
  id            Int         @id @default(autoincrement())
  name          String
  parentId      Int?        @map("parent_id")
  parent        Category?   @relation("CategoryHierarchy", fields: [parentId], references: [id])
  subcategories Category[]  @relation("CategoryHierarchy")
  products      Product[]
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt
}

model Tag {
  id            Int         @id @default(autoincrement())
  name          String      @unique
  products      Product[]   @relation("ProductTags")
  createdAt     DateTime    @default(now())
}

model Variant {
  id            Int         @id @default(autoincrement())
  productId     Int
  product       Product     @relation(fields: [productId], references: [id])
  color         String?
  size          String?
  stock         Int
  sku           String      @unique
  price         Float?
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt
}

model Image {
  id            Int         @id @default(autoincrement())
  productId     Int
  product       Product     @relation(fields: [productId], references: [id])
  url           String
  createdAt     DateTime    @default(now())
}

model StockHistory {
  id            Int         @id @default(autoincrement())
  productId     Int
  product       Product     @relation(fields: [productId], references: [id])
  quantity      Int
  reason        String      // e.g., "restock", "sale", "adjustment"
  location      String?     // For multi-location inventory
  createdAt     DateTime    @default(now())
}

